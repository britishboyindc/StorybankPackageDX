<template>
    <template if:true={isCurrentComponent}>
        <lightning-card title="Convert Web Submission - Storyteller">
            <h3 class="slds-section-title--divider">Submitted Storyteller Information</h3>
            <div class="slds-form--stacked slds-p-around--medium slds-m-bottom--x-small">
                <lightning-record-form record-id={recordId} object-api-name="storybank__Storybank_Submitted__c"
                    fields={fieldsForConversion} columns="2" mode="readonly">
                </lightning-record-form>
            </div>

            <template if:true={isCreateContactVisible}>
                <h3 class="slds-section-title--divider">Create New Storyteller Record</h3>
                <div class="slds-form--stacked slds-p-around--medium slds-m-bottom--x-small">
                    <lightning-record-edit-form object-api-name="Contact" onsuccess={handleSuccess}>
                        <lightning-messages>
                        </lightning-messages>
                        <lightning-layout multiple-rows>
                            <lightning-layout-item size="6" padding="around-small" for:each={contactWrapper}
                                for:item="item" key={key}>
                                <lightning-input-field field-name={item.fieldAPI} onchange={handleChange}
                                    title={item.title} value={item.value}></lightning-input-field>
                            </lightning-layout-item>
                        </lightning-layout>
                        <lightning-button class="slds-align_absolute-center" variant="brand" type="submit" name="save"
                            label="Create Contact and Continue">
                        </lightning-button>
                    </lightning-record-edit-form>
                </div>
            </template>

            <template if:true={isTableVisible}>
                <h3 class="slds-section-title--divider">Potential Storyteller Matches</h3>
                <div class="slds-form--stacked slds-p-around--medium slds-m-bottom--x-small">
                    <lightning-datatable class="datatable" key-field="Id" data={exContResult} columns={columns}
                        hide-checkbox-column onrowaction={rowAction}>
                    </lightning-datatable>
                    <button class="slds-button slds-button_brand slds-align_absolute-center" onclick={changeBoolean}
                        style="margin-top: 1rem;">Create New Contact</button>
                </div>
            </template>
        </lightning-card>
    </template>

    <template if:true={isUpdatePageComponent}>
        <c-storybank-Submission-Update-Storyteller contactid={selectedContactId} storybanksubmittedid={recordId}
            nominatoremail={nominatorEmail} nominatororgname={nominatorOrgName}>
        </c-storybank-Submission-Update-Storyteller>
    </template>

    <template if:true={isCreateNominatorPage}>
        <c-storybank-Submission-Conversion-Nominator nominatoremail={nominatorEmail} submittedrecid={recordId}
            storytellerid={createdContact.Id}></c-storybank-Submission-Conversion-Nominator>
    </template>

    <template if:true={isCreateOrganizationPage}>
        <c-storybank-Submission-Conversion-Nom-Org nominatoremail={nominatorEmail} submittedrecid={recordId}
            storytellerid={createdContact.Id} nominatororgname={nominatorOrgName}>
        </c-storybank-Submission-Conversion-Nom-Org>
    </template>

</template>
