<template>
    <template if:true={isCurrentComponent}>
        <lightning-card title="Convert Submitted Story - Nominator">
            <h3 class="slds-section-title--divider">SUBMITTED NOMINATOR INFORMATION</h3>
            <div class="slds-form--stacked slds-p-around--medium slds-m-bottom--x-small">
                <lightning-record-form record-id={submittedrecid} object-api-name="storybank__Storybank_Submitted__c"
                    fields={fieldsForConversion} columns="2" mode="readonly">
                </lightning-record-form>
            </div>
            <template if:true={isCreateNominatorVisible}>
                <h3 class="slds-section-title--divider">Create New Nominator Record</h3>
                <div class="slds-form--stacked slds-p-around--medium slds-m-bottom--x-small">
                    <lightning-record-edit-form object-api-name="Contact">
                        <div class="slds-grid slds-gutters">
                            <div class="slds-col">
                                <lightning-input-field field-name="FirstName" onchange={handleChange}
                                    title="currentNominator-FirstName" value={currentNominator.FirstName}>
                                </lightning-input-field>
                                <lightning-input-field field-name="Email" onchange={handleChange}
                                    title="currentNominator-Email" value={currentNominator.Email}>
                                </lightning-input-field>
                                <lightning-input-field field-name="MailingStreet" onchange={handleChange}
                                    title="currentNominator-MailingStreet" value={currentNominator.MailingStreet}>
                                </lightning-input-field>
                                <lightning-input-field field-name="MailingState" onchange={handleChange}
                                    title="currentNominator-MailingState" value={currentNominator.MailingState}>
                                </lightning-input-field>
                            </div>
                            <div class="slds-col">
                                <lightning-input-field field-name="LastName" onchange={handleChange}
                                    title="currentNominator-LastName" value={currentNominator.LastName}>
                                </lightning-input-field>
                                <lightning-input-field field-name="Phone" onchange={handleChange}
                                    title="currentNominator-Phone" value={currentNominator.Phone}>
                                </lightning-input-field>
                                <div style="height: 6.25rem">
                                    <lightning-input-field field-name="MailingCity" onchange={handleChange}
                                        title="currentNominator-MailingCity" value={currentNominator.MailingCity}>
                                    </lightning-input-field>
                                </div>
                                <lightning-input-field field-name="MailingPostalCode" onchange={handleChange}
                                    title="currentNominator-MailingPostalCode"
                                    value={currentNominator.MailingPostalCode}>
                                </lightning-input-field>
                            </div>
                        </div>
                    </lightning-record-edit-form>
                    <button class="slds-button slds-button_brand slds-align_absolute-center"
                        onclick={handleCreate}>Create Contact and
                        Finish</button>
                </div>
            </template>

            <template if:true={isTableVisible}>
                <h3 class="slds-section-title--divider">Potential Storyteller Matches</h3>
                <div class="slds-form--stacked slds-p-around--medium slds-m-bottom--x-small">
                    <table class="slds-table slds-table_cell-buffer slds-table_bordered">
                        <thead>
                            <tr class="slds-line-height_reset">
                                <th class="" scope="col">
                                    <div class="slds-truncate" title="Opportunity Name">Select</div>
                                </th>
                                <th class="" scope="col">
                                    <div class="slds-truncate" title="Account Name">First Name</div>
                                </th>
                                <th class="" scope="col">
                                    <div class="slds-truncate" title="Close Date">Last Name</div>
                                </th>
                                <th class="" scope="col">
                                    <div class="slds-truncate" title="Stage">Email</div>
                                </th>
                                <th class="" scope="col">
                                    <div class="slds-truncate" title="Confidence">Phone</div>
                                </th>
                                <th class="" scope="col">
                                    <div class="slds-truncate" title="Amount">Mailing Zip/Postal Code</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="slds-hint-parent" for:each={existedNominators} for:item='row' key={id}>
                                <th data-label="Opportunity Name" scope="row">
                                    <div class="slds-truncate" title="Cloudhub"><a href="javascript:void(0);"
                                            tabindex="-1" name={row.Id} onclick={onSelectClick}>Select</a></div>
                                </th>
                                <td data-label="First Name">
                                    <div class="slds-truncate">{row.FirstName}</div>
                                </td>
                                <td data-label="Close Date">
                                    <div class="slds-truncate">{row.LastName}</div>
                                </td>
                                <td data-label="Prospecting">
                                    <div class="slds-truncate">{row.Email}</div>
                                </td>
                                <td data-label="Confidence">
                                    <div class="slds-truncate">{row.Phone}</div>
                                </td>
                                <td data-label="Amount">
                                    <div class="slds-truncate">{row.MailingPostalCode}</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <button class="slds-button slds-button_brand slds-align_absolute-center" onclick={changeBoolean}
                        style="margin-top: 1rem;">Create New Contact</button>
                </div>
            </template>
        </lightning-card>
    </template>

    <template if:true={isUpdateNominatorComponent}>
        <lightning-card title="Update Nominator Information">
            <c-storybank-Submission-Update-Nominator storytellerid={storytellerid} submittedrecid={submittedrecid}
                nominatorid={selectedNominatorId} nominatororgid={nominatororgid}>
            </c-storybank-Submission-Update-Nominator>
        </lightning-card>
    </template>

</template>